
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>webfont documentation</title>


    <link href="../css/gluegun.min.css" rel="stylesheet">
    <link href="../css/default.min.css" rel="stylesheet">
    <style type="text/css">
        code, body {
            font-family: 'CenturyGothic';
        }
    </style>
    <link href='//cdn.repository.webfont.com/webfonts/nomal/17490/47735/5f709708f629d83974c6e7bc.css' rel='stylesheet' type='text/css' />
</head>
<body>
    <aside class="sidebar">
        <div class="sidebar__inner">
            <a href="" class="sidebar__close">
                <svg class="sidebar__close__icon">
                    <polygon points="15.8333324 5.34166622 14.6583325 4.16666642 9.99999942 8.82499958 5.34166622 4.16666642 4.16666642 5.34166622 8.82499958 9.99999942 4.16666642 14.6583325 5.34166622 15.8333324 9.99999942 11.1749992 14.6583325 15.8333324 15.8333324 14.6583325 11.1749992 9.99999942"></polygon>
                </svg>
            </a>
            <a href="index.html" class="logo">
                <img src="../img/webfont.png" alt="">
            </a>
            <ul class="doc-link">

                <li class='doc-link__category '>
                    <a href="" class="doc-link__header">
                        Synopsis
                    </a>
                    <ul class="doc-link__items">
                        <li>
                            <a href="index.html">
                                Quick
                            </a>
                        </li>
                    </ul>
                </li>
                <li class='doc-link__category'>
                    <a href="" class="doc-link__header">
                        Deployment
                    </a>
                    <ul class="doc-link__items" >
                        <li>
                            <a href="self-host-guide.html">
                                Guide
                            </a>
                        </li>
                        <li>
                            <a href="self-host-docker.html">
                                docker
                            </a>
                        </li>
                        <li>
                            <a href="self-host-docker-compose.html">
                                docker-compose
                            </a>
                        </li>
                        <li>
                            <a href="self-host-ubuntu.html">
                                ubuntu
                            </a>
                        </li>
                        <li>
                            <a href="self-host-macos.html">
                                Mac os
                            </a>
                        </li>
                        <li>
                            <a href="self-host-windows.html">
                                Windows
                            </a>
                        </li>
                        <li>
                            <a href="self-host-centos.html">
                                CentOS
                            </a>
                        </li>
                    </ul>
                </li>
                <li class='doc-link__category '>
                    <a href="" class="doc-link__header">
                        SDK
                    </a>
                    <ul class="doc-link__items" style=''>

                        <li>
                            <a href="sdk-guide.html">
                                Guide
                            </a>
                        </li>

                        <li>
                            <a href="sdk-java.html">
                                Java
                            </a>
                        </li>
                        <li>
                            <a href="sdk-nodejs.html">
                                NodeJs
                            </a>
                        </li>
                        <li>
                            <a href="sdk-netframework.html">
                                Net Framework
                            </a>
                        </li>
                        <li>
                            <a href="sdk-netcore.html">
                                Net Core
                            </a>
                        </li>
                        <li>
                            <a href="sdk-php.html">
                                PHP
                            </a>
                        </li>
                        <li>
                            <a href="sdk-python.html">
                                Python
                            </a>
                        </li>
                        <li>
                            <a href="sdk-applet.html">
                                Wechat applet
                            </a>
                        </li>
                    </ul>
                </li>

                <li class='doc-link__category  toggled'>
                    <a href="" class="doc-link__header">
                        h5 plug-in
                    </a>
                    <ul class="doc-link__items" style='display: block'>

                        <li>
                            <a href="h5-guide.html" class="doc-link__active">
                                Guide
                            </a>
                        </li>


                    </ul>
                </li>
                <li class='doc-link__category '>
                    <a href="" class="doc-link__header">
                        Contact
                    </a>
                    <ul class="doc-link__items" style=''>

                        <li>
                            <a href="contact.html">
                                Contact
                            </a>
                        </li>


                    </ul>
                </li>
            </ul>
        </div>
    </aside>

    <section class="content">


        <header class="header">
            <a href="" class="sidebar-toggle"></a>

            <div class="search">
                <input type="text" class="search__text" placeholder="Search documents...">
            </div>

            <div class="doc-actions">

                <div class="dropdown doc-actions__edit">
                    <a href="" class="dropdown__toggle dropdown__toggle--caret doc-actions__item">
                        <img src="../img/edit.svg" alt="">
                        <span>Suggest an Edit</span>
                    </a>

                    <div class="dropdown__menu dropdown__menu--right">
                        <ol>
                            <li>Log into Github.</li>
                            <li>Edit files with your changes by clicking on 'Edit the file in your fork of this project' button in Github.</li>
                            <li>Commit changes via 'Create a new branch for this commit and start a pull request'.</li>
                        </ol>

                        <a href="https://github.com/webfont-io/docs.webfont.io/blob/master/readme/cn/selfhost/H5/README_EN.md" class="button button--primary button--block">Edit in Github</a>
                    </div>
                </div>


                <div class="dropdown">
                    <a href="" class="dropdown__toggle dropdown__toggle--caret doc-actions__item">
                        <img src="../img/translate.svg" alt="">
                        <span>Language</span>
                    </a>

                    <div class="dropdown__menu dropdown__menu--right">
                        <a class="dropdown__item" href="#">English</a>
                        <a class="dropdown__item" href="../cn/h5-guide.html">简体中文</a>
                    </div>
                </div>
            </div>
        </header>
        <section class="doc-preview">


            <h1>h5 plug-in</h1>

            <h2>Synopsis</h2>

            <p>For H5 online editing tools, when your user needs to edit text content online, when he needs to use multiple fonts to test the effect, you will often load multiple fonts to the client. This will inevitably slow down the performance of H5 tools, which not only affects the user experience, but also brings huge traffic costs. Use H5 plug-in now：</p>
            <ul>
                <li>When the webpage is opened, it does not need to load any font data, so that the webpage can be expanded quickly;</li>
                <li>It can respond in milliseconds when changing fonts;</li>
                <li>It will quickly generate temporary subset fonts according to the content entered by the user and store them in the client cache;</li>
                <li>Instant response, light and dexterous, without slow down the performance</li>


            </ul>
            <h2>Deployment the capabilities</h2>
            <h3>Use docker-compose deployment the capabilities</h3>

            <pre><code>version: '2'
services:
  h5js:
    container_name: h5js-server
    image: 'registry.cn-hangzhou.aliyuncs.com/webfont/h5.server:1.20.1'
    restart: always
    command:
      node /app/main.js
    environment:
      WEBFONT_APIKEY: "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
      WEBFONT_SERVER: "127.0.0.1:5000"
    ports:
      - "8181:80"
</code></pre>
            <ul>
                <li>The "h5js-server" service depends on the "webfont-api" service, so you must confirm that the "webfont-api" service has been deployed successfully before using the "h5js-server" service.</li>
                <li>WEBFONT_APIKEY: It must be the same as WEBFONTAPI_KEY in webfont service。</li>
                <li>WEBFONT_SERVER:It is the address of the "webfont-api" service</li>
                <li>8181:80:Open port 80 in the virtual machine to bind to port 8181 of the host</li>
            </ul>

            <h3>Web client code</h3>
            <h4>1、Reference the javascript library</h4>
            <pre><code>&lt;script type="text/javascript" src="h5js.new.min.js">&lt;/script&gt;</code></pre>
            <h4>2、Set the host address</h4>
            <p>window.ENV_WEBFONT_SERVERURL:Its value is the address of the H5 server(ip + port).</p>
            <pre><code>&lt;script type = "text/javascript"&gt;
   window.ENV_WEBFONT_SERVERURL = "127.0.0.1:8181";// host service IP
&lt;/script&gt;</code></pre>

            <h2>Sample</h2>
            <h3>1,getFontFace()</h3>
            <pre><code>
var entity={
    AccessKey:'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx', 　
    Content:'xxxxx', 　　　　　　
    Tag: '.test1'   　　　　　　　　　　　　　　　　　
 };
 $youzikuClient.getFontFace(entity, function (result) {
    console.log(result.FontFamily);　　　　　　　　
    console.log(result.AccessKey);
    console.log(result.Tag);
    console.log(result.ErrorMessage);　　　　　　　
    console.log(result.Code);　　　　　　　        
});
                </code></pre>
            <h3>2,getBatchFontFace ()</h3>
            <pre><code>
var data = {
  Tags: []
};
data.Tags.push({ AccessKey: 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx', Content: 'xxx', Tag: '.test1' });
data.Tags.push({ AccessKey: 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx', Content: 'xxx', Tag: '#id2' });     
$youzikuClient.getBatchFontFace(data, function (result) {
  var length = result.FontfaceList.length;
  for (var i = 0; i< length; i++) {
    console.log(result.FontfaceList[i].Tag);
    console.log(result.FontfaceList[i].AccessKey);
    console.log(result.FontfaceList[i].FontFamily);
    console.log(result.FontfaceList[i].ErrorMessage);　　　　　　　
    console.log(result.FontfaceList[i].Code);　　　　　　　       
  }
});
                </code></pre>
        </section>
                        <footer class="footer">
                            webfont.io tech

                            <div class="footer__widget">
                                <a href="contact.html">Contact</a>
                            </div>

                        </footer>
                    </section>

                    <script src="../js/jquery-3.3.1.min.js"></script>
            <script src="../js/highlight.min.js"></script>
            <script src="../js/clipboard.min.js"></script>
            <script src="../js/gluegun.min.js"></script>
            

</body>
</html>
